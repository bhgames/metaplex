(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{151:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return y}));var r,a=n(18),i=n(1),o=n.n(i),c=n(20),s=n(3),u=n(33),l=n(54),d=n(55),b=n(50),h=new u.e.PublicKey("faircnAB9k59Y4TXmLabBULeuTLgV7TkGMGNkjnA15j");!function(e){e.Brewing="Brewing",e.Finished="Finished",e.PastDue="Past Due"}(r||(r={}));var p=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var a,i,s,l,d,b,p,f,m,j,y,x,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new u.c(r,t,{preflightCommitment:"recent"}),e.next=3,u.b.fetchIdl(h,a);case 3:return i=e.sent,s=new u.b(i,h,a),e.next=7,s.account.fairLaunch.fetch(n);case 7:return l=e.sent,e.next=10,g(l.tokenMint,t.publicKey);case 10:return d=e.sent,b=Object(c.a)(d,2),p=b[0],f=b[1],e.prev=14,e.next=17,s.account.fairLaunchTicket.fetch(p);case 17:m=e.sent,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),console.log("No ticket");case 23:return e.next=25,s.provider.connection.getBalance(l.treasury);case 25:return j=e.sent,y=new Uint8Array([]),e.next=29,v(l.tokenMint);case 29:return x=e.sent[0],e.prev=30,e.next=33,s.provider.connection.getAccountInfo(x);case 33:O=e.sent,y=new Uint8Array((null===O||void 0===O?void 0:O.data)||[]),e.next=41;break;case 37:e.prev=37,e.t1=e.catch(30),console.log("Could not find fair launch lottery."),console.log(e.t1);case 41:return e.abrupt("return",{id:n,state:l,program:s,ticket:{pubkey:p,bump:f,data:m},lottery:{pubkey:x,data:y},treasury:j});case 42:case"end":return e.stop()}}),e,null,[[14,20],[30,37]])})));return function(t,n,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,i,c,s,d,h,p,f,j,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(n.state.tokenMint,t.publicKey);case 2:return r=e.sent[0],i=n.ticket.data,e.next=6,v(n.state.tokenMint);case 6:return c=e.sent[0],e.next=9,Object(b.d)(n.state.tokenMint,t.publicKey);case 9:if(s=e.sent[0],!(null===i||void 0===i?void 0:i.amount.gt(n.state.currentMedian))){e.next=20;break}return console.log("Adjusting down...",null===i||void 0===i?void 0:i.amount.toNumber(),n.state.currentMedian.toNumber()),e.next=14,m(n.program,n.state.currentMedian.toNumber(),t,n,r);case 14:return d=e.sent,h=d.remainingAccounts,p=d.instructions,f=d.signers,e.next=20,n.program.rpc.adjustTicket(n.state.currentMedian,{accounts:{fairLaunchTicket:r,fairLaunch:n.id,fairLaunchLotteryBitmap:c,treasury:n.state.treasury,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},instructions:p.length>0?p:void 0,remainingAccounts:[{pubkey:t.publicKey,isSigner:!0,isWritable:!0}].concat(Object(a.a)(h)),signers:f});case 20:return e.next=22,n.program.provider.connection.getAccountInfo(s);case 22:return j=e.sent,y=j?[]:[Object(b.b)(s,t.publicKey,t.publicKey,n.state.tokenMint)],e.next=26,n.program.rpc.punchTicket({accounts:{fairLaunchTicket:r,fairLaunch:n.id,fairLaunchLotteryBitmap:c,payer:t.publicKey,buyerTokenAccount:s,tokenMint:n.state.tokenMint,tokenProgram:l.b},instructions:y.length>0?y:void 0});case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var t=Object(s.a)(o.a.mark((function t(n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),r.toBuffer()],h);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),v=function(){var t=Object(s.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),e.from("lottery")],h);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r,a,i){var s,h,p,f,g,v,m,j,y,x,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",{remainingAccounts:[],instructions:[],signers:[],amountLamports:0});case 2:if(s=a.ticket,h=[],p=[],f=[],g=0,a.state.treasuryMint){e.next=11;break}g=s||0!==n?Math.ceil(n*d.LAMPORTS_PER_SOL):a.state.data.priceRangeStart.toNumber(),e.next=23;break;case 11:return v=u.e.Keypair.generate(),f.push(v),p.push(l.c.createApproveInstruction(l.b,a.state.treasuryMint,v.publicKey,r.publicKey,[],amountNumber+a.state.data.fees.toNumber())),h.push({pubkey:a.state.treasuryMint,isWritable:!0,isSigner:!1}),e.t0=h,e.next=18,Object(b.d)(a.state.treasuryMint,r.publicKey);case 18:e.t1=e.sent[0],e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2),h.push({pubkey:v.publicKey,isWritable:!1,isSigner:!0}),h.push({pubkey:l.b,isWritable:!1,isSigner:!1});case 23:if(!s.data){e.next=39;break}return e.next=26,Object(b.e)(a.state.tokenMint,null===(m=s.data)||void 0===m?void 0:m.seq);case 26:return j=e.sent,y=Object(c.a)(j,2),x=y[0],O=y[1],e.next=32,t.provider.connection.getAccountInfo(x);case 32:if(e.sent){e.next=39;break}return e.t3=p,e.next=37,t.instruction.createTicketSeq(O,{accounts:{fairLaunchTicketSeqLookup:x,fairLaunch:a.id,fairLaunchTicket:i,payer:r.publicKey,systemProgram:u.e.SystemProgram.programId,rent:u.e.SYSVAR_RENT_PUBKEY},signers:[]});case 37:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 39:return e.abrupt("return",{remainingAccounts:h,instructions:p,signers:f,amountLamports:g});case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.d)(n.state.tokenMint,t.publicKey);case 4:if(r=e.sent[0],a=u.e.Keypair.generate(),i=[a],c=[l.c.createApproveInstruction(l.b,r,a.publicKey,t.publicKey,[],1)],s=[],!n.state.treasuryMint){e.next=17;break}return s.push({pubkey:n.state.treasuryMint,isWritable:!0,isSigner:!1}),e.t0=s,e.next=14,Object(b.d)(n.state.treasuryMint,t.publicKey);case 14:e.t1=e.sent[0],e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2);case 17:return console.log("tfr",n.state.treasury.toBase58(),t.publicKey.toBase58(),r.toBase58()),e.next=20,n.program.rpc.receiveRefund({accounts:{fairLaunch:n.id,treasury:n.state.treasury,buyer:t.publicKey,buyerTokenAccount:r,transferAuthority:a.publicKey,tokenMint:n.state.tokenMint,tokenProgram:l.b,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},remainingAccounts:s,instructions:c,signers:i});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var i,s,l,d,b,h,p,f,j,y,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return i=r.ticket.data,e.next=5,g(r.state.tokenMint,n.publicKey);case 5:return s=e.sent,l=Object(c.a)(s,2),d=l[0],b=l[1],e.next=11,m(r.program,t,n,r,d);case 11:if(h=e.sent,p=h.remainingAccounts,f=h.instructions,j=h.signers,y=h.amountLamports,!i){e.next=24;break}return e.next=19,v(r.state.tokenMint);case 19:return x=e.sent[0],console.log("Anchor wallet",n.publicKey.toBase58(),y),e.next=23,r.program.rpc.adjustTicket(new u.a(y),{accounts:{fairLaunchTicket:d,fairLaunch:r.id,fairLaunchLotteryBitmap:x,treasury:r.state.treasury,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},remainingAccounts:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}].concat(Object(a.a)(p)),signers:j,instructions:f.length>0?f:void 0});case 23:return e.abrupt("return");case 24:return e.prev=24,console.log("Amount",y),e.next=28,r.program.rpc.purchaseTicket(b,new u.a(y),{accounts:{fairLaunchTicket:d,fairLaunch:r.id,treasury:r.state.treasury,buyer:n.publicKey,payer:n.publicKey,systemProgram:u.e.SystemProgram.programId,rent:u.e.SYSVAR_RENT_PUBKEY,clock:u.e.SYSVAR_CLOCK_PUBKEY},remainingAccounts:p,signers:j,instructions:f.length>0?f:void 0});case 28:e.next=34;break;case 30:throw e.prev=30,e.t0=e.catch(24),console.log(e.t0),e.t0;case 34:case"end":return e.stop()}}),e,null,[[24,30]])})));return function(t,n,r){return e.apply(this,arguments)}}()}).call(this,n(6).Buffer)},231:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m}));var r=n(1),a=n.n(r),i=n(3),o=n(33),c=n(54),s=n(55),u=n(481),l=n(50),d=new o.e.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),b=new o.e.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),h=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var o,c,s,u,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>3&&void 0!==l[3]?l[3]:"recent",o=l.length>4&&void 0!==l[4]&&l[4],c=!1,s={slot:0,confirmations:0,err:null},u=0,e.next=7,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(u,l){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){c||(c=!0,console.log("Rejecting for timeout..."),l({timeout:!0}))}),n);case 1:if(c||!o){e.next=7;break}return Object(i.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,s=n&&n.value[0],c||(s?s.err?(console.log("REST error for",t,s),c=!0,l(s.err)):s.confirmations?(console.log("REST confirmation for",t,s),c=!0,u(s)):console.log("REST no confirmations for",t,s):console.log("REST null result for",t,s)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=5,j(2e3);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return s=e.sent,r._signatureSubscriptions[u]&&r.removeSignatureListener(u),c=!0,console.log("Returning status",s),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),p=function(t,n,r,a){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o.e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1},{pubkey:o.e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new o.e.TransactionInstruction({keys:i,programId:l.a,data:e.from([])})},f=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i,c,s,u,l,b,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new o.c(r,t,{preflightCommitment:"recent"}),e.next=3,o.b.fetchIdl(d,i);case 3:return c=e.sent,s=new o.b(c,d,i),e.next=7,s.account.candyMachine.fetch(n);case 7:return u=e.sent,l=u.data.itemsAvailable.toNumber(),b=u.itemsRedeemed.toNumber(),h=l-b,e.abrupt("return",{id:n,program:s,state:{itemsAvailable:l,itemsRedeemed:b,itemsRemaining:h,isSoldOut:0===h,isActive:u.data.goLiveDate.toNumber()<(new Date).getTime()/1e3,goLiveDate:u.data.goLiveDate,treasury:u.wallet,tokenMint:u.tokenMint,config:u.config,price:u.data.price}});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("metadata"),b.toBuffer(),n.toBuffer(),e.from("edition")],b);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("metadata"),b.toBuffer(),n.toBuffer()],b);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i,d,h,f,m,j,y,x,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.e.Keypair.generate(),e.next=3,Object(l.d)(r.publicKey,n);case 3:return i=e.sent[0],e.next=6,Object(l.d)(t.state.tokenMint,n);case 6:return d=e.sent[0],h=t.id,f=[],m=[r],e.t0=o.e.SystemProgram,e.t1=n,e.t2=r.publicKey,e.t3=c.a.span,e.next=16,t.program.provider.connection.getMinimumBalanceForRentExemption(c.a.span);case 16:return e.t4=e.sent,e.t5=c.b,e.t6={fromPubkey:e.t1,newAccountPubkey:e.t2,space:e.t3,lamports:e.t4,programId:e.t5},e.t7=e.t0.createAccount.call(e.t0,e.t6),e.t8=c.c.createInitMintInstruction(c.b,r.publicKey,0,n,n),e.t9=p(i,n,n,r.publicKey),e.t10=c.c.createMintToInstruction(c.b,r.publicKey,i,n,[],1),j=[e.t7,e.t8,e.t9,e.t10],t.state.tokenMint&&(y=o.e.Keypair.generate(),m.push(y),f.push({pubkey:d,isWritable:!0,isSigner:!1}),f.push({pubkey:y.publicKey,isWritable:!1,isSigner:!0}),j.push(c.c.createApproveInstruction(c.b,d,y.publicKey,n,[],t.state.price.toNumber()))),e.next=27,v(r.publicKey);case 27:return x=e.sent,e.next=30,g(r.publicKey);case 30:return O=e.sent,e.t11=j,e.next=34,t.program.instruction.mintNft({accounts:{config:t.state.config,candyMachine:h,payer:n,wallet:t.state.treasury,mint:r.publicKey,metadata:x,masterEdition:O,mintAuthority:n,updateAuthority:n,tokenMetadataProgram:b,tokenProgram:c.b,systemProgram:s.SystemProgram.programId,rent:o.e.SYSVAR_RENT_PUBKEY,clock:o.e.SYSVAR_CLOCK_PUBKEY},remainingAccounts:f.length>0?f:void 0});case 34:return e.t12=e.sent,e.t11.push.call(e.t11,e.t12),e.prev=37,e.next=40,Object(u.a)(t.program.provider.connection,t.program.provider.wallet,j,m);case 40:return e.abrupt("return",e.sent.txid);case 43:e.prev=43,e.t13=e.catch(37),console.log(e.t13);case 46:return e.abrupt("return","j");case 47:case"end":return e.stop()}}),e,null,[[37,43]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(e){return new Promise((function(t){return setTimeout(t,e)}))}}).call(this,n(6).Buffer)},481:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,a=n(18),i=n(1),o=n.n(i),c=n(3),s=n(55),u=n(65);!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(r||(r={}));var l=function(){var e=Object(c.a)(o.a.mark((function e(t,n,r,i){var c,l,d,b,p,f,g,v,m,j,y,x=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=x.length>4&&void 0!==x[4]?x[4]:"singleGossip",l=x.length>5&&void 0!==x[5]&&x[5],d=x.length>6?x[6]:void 0,b=x.length>7?x[7]:void 0,n.publicKey){e.next=6;break}throw new u.WalletNotConnectedError;case 6:if(p=new s.Transaction,r.forEach((function(e){return p.add(e)})),e.t0=d,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(c);case 12:e.t0=e.sent;case 13:if(p.recentBlockhash=e.t0.blockhash,l?(f=p).setSigners.apply(f,Object(a.a)(i.map((function(e){return e.publicKey})))):(g=p).setSigners.apply(g,[n.publicKey].concat(Object(a.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(v=p).partialSign.apply(v,Object(a.a)(i)),l){e.next=20;break}return e.next=19,n.signTransaction(p);case 19:p=e.sent;case 20:return b&&b(),e.next=23,h({connection:t,signedTransaction:p});case 23:return m=e.sent,j=m.txid,y=m.slot,e.abrupt("return",{txid:j,slot:y});case 27:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),d=function(){return(new Date).getTime()/1e3},b=15e3;function h(e){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(o.a.mark((function e(t){var n,r,a,i,s,u,l,h,p,g,m,y,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.timeout,i=void 0===a?b:a,s=n.serialize(),u=d(),l=0,e.next=6,r.sendRawTransaction(s,{skipPreflight:!0});case 6:return h=e.sent,console.log("Started awaiting confirmation for",h),p=!1,Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p||!(d()-u<i)){e.next=6;break}return r.sendRawTransaction(s,{skipPreflight:!0}),e.next=4,j(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,v(h,i,r,"recent",!0);case 13:if(g=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!g.err){e.next=19;break}throw console.error(g.err),new Error("Transaction failed: Custom instruction error");case 19:l=(null===g||void 0===g?void 0:g.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return m=null,e.prev=28,e.next=31,f(r,n,"single");case 31:m=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!m||!m.err){e.next=47;break}if(!m.logs){e.next=46;break}y=m.logs.length-1;case 39:if(!(y>=0)){e.next=46;break}if(!(x=m.logs[y]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+x.slice("Program log: ".length));case 43:--y,e.next=39;break;case 46:throw new Error(JSON.stringify(m.err));case 47:return e.prev=47,p=!0,e.finish(47);case 50:return console.log("Latency",h,d()-u),e.abrupt("return",{txid:h,slot:l});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function f(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(o.a.mark((function e(t,n,r){var a,i,c,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),i=n._serialize(a),c=i.toString("base64"),s=[c,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,n){return m.apply(this,arguments)}function m(){return m=Object(c.a)(o.a.mark((function e(t,n,r){var a,i,s,u,l,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:"recent",i=d.length>4&&void 0!==d[4]&&d[4],s=!1,u={slot:0,confirmations:0,err:null},l=0,e.next=7,new Promise(function(){var e=Object(c.a)(o.a.mark((function e(d,b){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{l=r.onSignature(t,(function(e,t){s=!0,u={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),b(u)):(console.log("Resolved via websocket",e),d(u))}),a)}catch(h){s=!0,console.error("WS error in setup",t,h)}case 2:if(s||!i){e.next=8;break}return Object(c.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,u=n&&n.value[0],s||(u?u.err?(console.log("REST error for",t,u),s=!0,b(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),s=!0,d(u)):console.log("REST no confirmations for",t,u):console.log("REST null result for",t,u)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,j(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return u=e.sent,r._signatureSubscriptions[l]&&r.removeSignatureListener(l),s=!0,console.log("Returning status",u),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function j(e){return new Promise((function(t){return setTimeout(t,e)}))}},50:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return g}));var r=n(1),a=n.n(r),i=n(3),o=n(33),c=n(54),s=n(55),u=new o.e.PublicKey("faircnAB9k59Y4TXmLabBULeuTLgV7TkGMGNkjnA15j"),l=function(e){if(e)return new Date(1e3*e.toNumber())},d=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),b={format:function(e){return e?d.format(e):"--"},asNumber:function(e){if(e)return e.toNumber()/s.LAMPORTS_PER_SOL}},h=new o.e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),p=function(){var t=Object(i.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),r.toArrayLike(e,"le",8)],u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.e.PublicKey.findProgramAddress([n.toBuffer(),c.b.toBuffer(),t.toBuffer()],h);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function g(t,n,r,a){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new s.TransactionInstruction({keys:i,programId:h,data:e.from([])})}}).call(this,n(6).Buffer)},507:function(e,t,n){},508:function(e,t,n){},513:function(e,t){},515:function(e,t){},531:function(e,t){},532:function(e,t){},653:function(e,t){},655:function(e,t){},669:function(e,t){},673:function(e,t){},675:function(e,t){},686:function(e,t){},688:function(e,t){},715:function(e,t){},717:function(e,t){},722:function(e,t){},724:function(e,t){},731:function(e,t){},743:function(e,t){},746:function(e,t){},758:function(e,t){},759:function(e,t,n){"use strict";n.r(t);var r,a,i,o,c=n(5),s=n.n(c),u=n(41),l=n.n(u),d=(n(507),n(508),n(10)),b=n(1),h=n.n(b),p=n(3),f=n(20),g=n(230),v=n(175),m=n(792),j=n(781),y=n(788),x=n(780),O=n(778),k=n(789),w=n(779),S=n(491),P=n(494),T=n(787),L=n(477),A=n(172),R=n(383),C=n(19),M=Object(R.a)((function(e){return Object(L.a)({root:{display:"flex",padding:e.spacing(0),"& > *":{margin:e.spacing(.5),marginRight:0,width:e.spacing(6),height:e.spacing(6),display:"flex",flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center",background:"#384457",color:"white",borderRadius:5,fontSize:10}},done:{display:"flex",margin:e.spacing(1),marginRight:0,padding:e.spacing(1),flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center",background:"#384457",color:"white",borderRadius:5,fontWeight:"bold",fontSize:18},item:{fontWeight:"bold",fontSize:18}})})),E=function(e){var t=e.date,n=e.status,r=e.style,a=e.start,i=e.end,o=e.onComplete,s=M(),u=Object(c.useState)(!!(a&&i&&t)&&a.getTime()-Date.now()<0),l=Object(f.a)(u,2),d=l[0],b=(l[1],function(e){var t=e.days,a=e.hours,i=e.minutes,o=e.seconds;return a+=24*t,e.completed?n?Object(C.jsx)("span",{className:s.done,children:n}):null:Object(C.jsxs)("div",{className:s.root,style:r,children:[d&&Object(C.jsx)(S.a,{elevation:0,children:Object(C.jsx)("span",{className:s.item,children:"+"})}),Object(C.jsxs)(S.a,{elevation:0,children:[Object(C.jsx)("span",{className:s.item,children:a<10?"0".concat(a):a}),Object(C.jsx)("span",{children:"hrs"})]}),Object(C.jsxs)(S.a,{elevation:0,children:[Object(C.jsx)("span",{className:s.item,children:i<10?"0".concat(i):i}),Object(C.jsx)("span",{children:"mins"})]}),Object(C.jsxs)(S.a,{elevation:0,children:[Object(C.jsx)("span",{className:s.item,children:o<10?"0".concat(o):o}),Object(C.jsx)("span",{children:"secs"})]})]})});return t&&a&&i&&d&&A.a,t?Object(C.jsx)(A.a,{date:t,onComplete:o,renderer:b}):null},K=n(782),_=n(786),N=n(785),B=n(300),D=n.n(B),W=n(790),I=n(55),F=n(102),Y=n(218),U=n(231),z=n(151),V=n(50),q=Object(v.a)(Y.WalletDialogButton)(r||(r=Object(g.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),H=v.a.div(a||(a=Object(g.a)([""]))),G=Object(v.a)(w.a)(i||(i=Object(g.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),X=function(e){return Object(L.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})},J=Object(v.a)(m.a)({color:"#C0D5FE",height:8,"& > *":{height:4},"& .MuiSlider-track":{border:"none",height:4},"& .MuiSlider-thumb":{height:24,width:24,marginTop:-10,background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)",border:"2px solid currentColor","&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&:before":{display:"none"}},"& .MuiSlider-valueLabel":{"& > *":{background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)"},lineHeight:1.2,fontSize:12,padding:0,width:32,height:32,marginLeft:9}});!function(e){e[e.Phase0=0]="Phase0",e[e.Phase1=1]="Phase1",e[e.Phase2=2]="Phase2",e[e.Lottery=3]="Lottery",e[e.Phase3=4]="Phase3",e[e.Phase4=5]="Phase4",e[e.Unknown=6]="Unknown"}(o||(o={}));var Q=function(e){var t=e.phaseName,n=e.desc,r=e.date,a=e.status;return Object(C.jsxs)(T.a,{container:!0,justifyContent:"center",children:[Object(C.jsxs)(T.a,{xs:6,justifyContent:"center",direction:"column",children:[Object(C.jsx)(P.a,{variant:"h5",style:{fontWeight:600},children:t}),Object(C.jsx)(P.a,{variant:"body1",color:"textSecondary",children:n})]}),Object(C.jsx)(T.a,{xs:6,container:!0,justifyContent:"flex-end",children:Object(C.jsx)(E,{date:Object(V.f)(r),style:{justifyContent:"flex-end"},status:a||"COMPLETE"})})]})};var Z=function(e){var t,n,r;if(!(null===e||void 0===e?void 0:e.lottery.data)||!(null===e||void 0===e?void 0:e.lottery.data.length)||!(null===e||void 0===e||null===(t=e.ticket.data)||void 0===t?void 0:t.seq)||!(null===e||void 0===e?void 0:e.state.phaseThreeStarted))return!1;var a=e.lottery.data[49+Math.floor((null===(n=e.ticket.data)||void 0===n?void 0:n.seq.toNumber())/8)],i=7-(null===(r=e.ticket.data)||void 0===r?void 0:r.seq.toNumber())%8,o=a&Math.pow(2,i);return o>0},$=function(e){var t,n,r,a,i,s,u,l,b,g,v,m,w,L,R,M,E,B,Y,$,ee,te,ne,re,ae,ie,oe,ce,se,ue,le,de,be,he,pe=Object(c.useState)(),fe=Object(f.a)(pe,2),ge=fe[0],ve=fe[1],me=Object(c.useState)(!1),je=Object(f.a)(me,2),ye=je[0],xe=je[1],Oe=Object(c.useState)(0),ke=Object(f.a)(Oe,2),we=ke[0],Se=ke[1],Pe=Object(F.useWallet)(),Te=Object(c.useMemo)((function(){if(Pe&&Pe.publicKey&&Pe.signAllTransactions&&Pe.signTransaction)return{publicKey:Pe.publicKey,signAllTransactions:Pe.signAllTransactions,signTransaction:Pe.signTransaction}}),[Pe]),Le=Object(c.useState)({open:!1,message:"",severity:void 0}),Ae=Object(f.a)(Le,2),Re=Ae[0],Ce=Ae[1],Me=Object(c.useState)(),Ee=Object(f.a)(Me,2),Ke=Ee[0],_e=Ee[1],Ne=Object(c.useState)(),Be=Object(f.a)(Ne,2),De=Be[0],We=Be[1],Ie=Object(c.useState)(!1),Fe=Object(f.a)(Ie,2),Ye=Fe[0],Ue=Fe[1],ze=Object(c.useState)(!1),Ve=Object(f.a)(ze,2),qe=Ve[0],He=Ve[1],Ge=Object(c.useState)(!1),Xe=Object(f.a)(Ge,2),Je=Xe[0],Qe=Xe[1],Ze=function(){var t=Object(p.a)(h.a.mark((function t(){var n,r,a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,xe(!0),!(Pe.connected&&(null===De||void 0===De?void 0:De.program)&&Pe.publicKey)){t.next=13;break}if(!(null===Ke||void 0===Ke||null===(n=Ke.ticket.data)||void 0===n?void 0:n.state.unpunched)||!Z(Ke)){t.next=6;break}return t.next=6,ct();case 6:return t.next=8,Object(U.c)(De,Pe.publicKey);case 8:return r=t.sent,t.next=11,Object(U.a)(r,e.txTimeout,e.connection,"singleGossip",!1);case 11:(null===(a=t.sent)||void 0===a?void 0:a.err)?Ce({open:!0,message:"Mint failed! Please try again!",severity:"error"}):Ce({open:!0,message:"Congratulations! Mint succeeded!",severity:"success"});case 13:t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),i=t.t0.msg||"Minting failed! Please try again!",t.t0.msg?311===t.t0.code?(i="SOLD OUT!",window.location.reload()):312===t.t0.code&&(i="Minting period hasn't started yet."):t.t0.message?t.t0.message.indexOf("0x138")||(t.t0.message.indexOf("0x137")?i="SOLD OUT!":t.t0.message.indexOf("0x135")&&(i="Insufficient funds to mint. Please fund your wallet.")):i="Transaction Timeout! Please try again.",Ce({open:!0,message:i,severity:"error"});case 20:return t.prev=20,xe(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,15,20,23]])})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){Object(p.a)(h.a.mark((function t(){var n,r,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Te){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Object(z.a)(Te,e.fairLaunchId,e.connection);case 5:if(n=t.sent,_e(n),t.prev=7,!n.state.tokenMint){t.next=18;break}return t.t0=e.connection,t.next=12,Object(V.d)(n.state.tokenMint,Te.publicKey);case 12:return t.t1=t.sent[0],t.next=15,t.t0.getTokenAccountBalance.call(t.t0,t.t1);case 15:r=t.sent,console.log("Heyyyo",r),r.value&&ve(r.value.uiAmount||0);case 18:t.next=24;break;case 20:t.prev=20,t.t2=t.catch(7),console.log("Problem getting fair launch token balance"),console.log(t.t2);case 24:Se((n.state.currentMedian||n.state.data.priceRangeStart).toNumber()/I.LAMPORTS_PER_SOL),t.next=31;break;case 27:t.prev=27,t.t3=t.catch(2),console.log("Problem getting fair launch state"),console.log(t.t3);case 31:if(!e.candyMachineId){t.next=45;break}return t.prev=32,t.next=35,Object(U.b)(Te,e.candyMachineId,e.connection);case 35:a=t.sent,We(a),t.next=43;break;case 39:t.prev=39,t.t4=t.catch(32),console.log("Problem getting candy machine state"),console.log(t.t4);case 43:t.next=46;break;case 45:console.log("No candy machine detected in configuration.");case 46:case"end":return t.stop()}}),t,null,[[2,27],[7,20],[32,39]])})))()}),[Te,e.candyMachineId,e.connection,e.fairLaunchId]);var $e=V.c.asNumber(null===Ke||void 0===Ke?void 0:Ke.state.data.priceRangeStart),et=V.c.asNumber(null===Ke||void 0===Ke?void 0:Ke.state.data.priceRangeEnd),tt=V.c.asNumber(null===Ke||void 0===Ke?void 0:Ke.state.data.tickSize),nt=V.c.asNumber(null===Ke||void 0===Ke?void 0:Ke.state.currentMedian),rt=[{value:$e||0,label:"".concat($e," SOL")},{value:nt||0,label:"".concat(nt)},{value:et||0,label:"".concat(et," SOL")}].filter((function(e){return void 0!==e&&0!==e.value})),at=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te){e.next=2;break}return e.abrupt("return");case 2:return console.log("deposit"),xe(!0),e.next=6,Object(z.c)(we,Te,Ke);case 6:xe(!1),Ce({open:!0,message:"Congratulations! Bid ".concat((null===Ke||void 0===Ke?void 0:Ke.ticket.data)?"updated":"inserted","!"),severity:"success"});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te){e.next=2;break}return e.abrupt("return");case 2:return console.log("refund"),xe(!0),e.next=6,Object(z.d)(Te,Ke);case 6:xe(!1),Ce({open:!0,message:"Congratulations! You have received a refund. This is an irreversible action.",severity:"success"});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te){e.next=2;break}return e.abrupt("return");case 2:return console.log("refund"),xe(!0),e.next=6,Object(z.c)(0,Te,Ke);case 6:xe(!1),Ce({open:!0,message:"Congratulations! Funds withdrawn. This is an irreversible action.",severity:"success"});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te&&Ke&&Ke.ticket){e.next=2;break}return e.abrupt("return");case 2:return console.log("punch"),xe(!0),e.next=6,Object(z.b)(Te,Ke);case 6:xe(!1),Ce({open:!0,message:"Congratulations! Ticket punched!",severity:"success"});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),st=function(e,t){var n,r,a,i,c=(new Date).getTime(),s=null===(n=Object(V.f)(null===e||void 0===e?void 0:e.state.data.phaseOneStart))||void 0===n?void 0:n.getTime(),u=null===(r=Object(V.f)(null===e||void 0===e?void 0:e.state.data.phaseOneEnd))||void 0===r?void 0:r.getTime(),l=null===(a=Object(V.f)(null===e||void 0===e?void 0:e.state.data.phaseTwoEnd))||void 0===a?void 0:a.getTime(),d=null===(i=Object(V.f)(null===t||void 0===t?void 0:t.state.goLiveDate))||void 0===i?void 0:i.getTime();return s&&c<s?o.Phase0:u&&c<=u?o.Phase1:l&&c<=l?o.Phase2:(null===e||void 0===e?void 0:e.state.phaseThreeStarted)?(null===e||void 0===e?void 0:e.state.phaseThreeStarted)&&d&&c>d?o.Phase4:(null===e||void 0===e?void 0:e.state.phaseThreeStarted)?o.Phase3:o.Unknown:o.Lottery}(Ke,De),ut=(null===De||void 0===De?void 0:De.state.goLiveDate)&&(null===Ke||void 0===Ke?void 0:Ke.state.data.phaseTwoEnd)&&(null===De||void 0===De?void 0:De.state.goLiveDate.lt(null===Ke||void 0===Ke?void 0:Ke.state.data.phaseTwoEnd));return Object(C.jsxs)(j.a,{style:{marginTop:100},children:[Object(C.jsx)(j.a,{maxWidth:"xs",style:{position:"relative"},children:Object(C.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:Object(C.jsx)(y.a,{component:"button",variant:"body2",color:"textSecondary",align:"right",onClick:function(){Qe(!0)},children:"Anti-Rug Policy"})})}),Object(C.jsx)(j.a,{maxWidth:"xs",style:{position:"relative"},children:Object(C.jsx)(S.a,{style:{padding:24,backgroundColor:"#151A1F",borderRadius:6},children:Object(C.jsxs)(T.a,{container:!0,justifyContent:"center",direction:"column",children:[st===o.Phase0&&Object(C.jsx)(Q,{phaseName:"Phase 0",desc:"Anticipation Phase",date:null===Ke||void 0===Ke?void 0:Ke.state.data.phaseOneStart}),st===o.Phase1&&Object(C.jsx)(Q,{phaseName:"Phase 1",desc:"Set price phase",date:null===Ke||void 0===Ke?void 0:Ke.state.data.phaseOneEnd}),st===o.Phase2&&Object(C.jsx)(Q,{phaseName:"Phase 2",desc:"Grace period",date:null===Ke||void 0===Ke?void 0:Ke.state.data.phaseTwoEnd}),st===o.Lottery&&Object(C.jsx)(Q,{phaseName:"Phase 3",desc:"Raffle in progress",date:null===Ke||void 0===Ke?void 0:Ke.state.data.phaseTwoEnd.add(null===Ke||void 0===Ke?void 0:Ke.state.data.lotteryDuration)}),st===o.Phase3&&!De&&Object(C.jsx)(Q,{phaseName:"Phase 3",desc:"Raffle finished!",date:null===Ke||void 0===Ke?void 0:Ke.state.data.phaseTwoEnd}),st===o.Phase3&&De&&Object(C.jsx)(Q,{phaseName:"Phase 3",desc:"Minting starts in...",date:null===De||void 0===De?void 0:De.state.goLiveDate}),st===o.Phase4&&Object(C.jsx)(Q,{phaseName:ut?"Phase 3":"Phase 4",desc:"Candy Time \ud83c\udf6c \ud83c\udf6c \ud83c\udf6c",date:null===De||void 0===De?void 0:De.state.goLiveDate,status:"LIVE"}),Ke&&Object(C.jsx)(T.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:200,marginTop:20,marginBottom:20,background:"#384457",borderRadius:6},children:Ke.ticket.data?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(P.a,{children:"Your bid"}),Object(C.jsxs)(P.a,{variant:"h6",style:{fontWeight:900},children:[V.c.format(((null===Ke||void 0===Ke||null===(t=Ke.ticket.data)||void 0===t?void 0:t.amount.toNumber())||0)/I.LAMPORTS_PER_SOL)," ","SOL"]})]}):[o.Phase0,o.Phase1].includes(st)?Object(C.jsxs)(P.a,{children:["You haven't entered this raffle yet. ",Object(C.jsx)("br",{}),(null===Ke||void 0===Ke||null===(n=Ke.state)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.fee)&&Object(C.jsx)("span",{children:Object(C.jsxs)("b",{children:["All initial bids will incur a \u25ce"," ",(null===Ke||void 0===Ke||null===(a=Ke.state)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.fee.toNumber())/I.LAMPORTS_PER_SOL," ","fee."]})})]}):Object(C.jsx)(P.a,{children:"You didn't participate in this raffle."})}),Ke&&Object(C.jsxs)(C.Fragment,{children:[[o.Phase1,o.Phase2,o.Phase3,o.Lottery].includes(st)&&(null===Ke||void 0===Ke||null===(s=Ke.ticket)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.state.withdrawn)&&Object(C.jsx)("div",{style:{paddingTop:"15px"},children:Object(C.jsx)(W.a,{severity:"error",children:"Your bid was withdrawn and cannot be adjusted or re-inserted."})}),[o.Phase1,o.Phase2].includes(st)&&Ke.state.currentMedian&&(null===Ke||void 0===Ke||null===(l=Ke.ticket)||void 0===l||null===(b=l.data)||void 0===b?void 0:b.amount)&&!(null===Ke||void 0===Ke||null===(g=Ke.ticket)||void 0===g||null===(v=g.data)||void 0===v?void 0:v.state.withdrawn)&&Ke.state.currentMedian.gt(null===Ke||void 0===Ke||null===(m=Ke.ticket)||void 0===m||null===(w=m.data)||void 0===w?void 0:w.amount)&&Object(C.jsx)("div",{style:{paddingTop:"15px"},children:Object(C.jsx)(W.a,{severity:"warning",children:"Your bid is currently below the median and will not be eligible for the raffle."})}),[o.Phase3,o.Lottery].includes(st)&&Ke.state.currentMedian&&(null===Ke||void 0===Ke||null===(L=Ke.ticket)||void 0===L||null===(R=L.data)||void 0===R?void 0:R.amount)&&!(null===Ke||void 0===Ke||null===(M=Ke.ticket)||void 0===M||null===(E=M.data)||void 0===E?void 0:E.state.withdrawn)&&Ke.state.currentMedian.gt(null===Ke||void 0===Ke||null===(B=Ke.ticket)||void 0===B||null===(Y=B.data)||void 0===Y?void 0:Y.amount)&&Object(C.jsx)("div",{style:{paddingTop:"15px"},children:Object(C.jsxs)(W.a,{severity:"error",children:["Your bid was below the median and was not included in the raffle. You may click ",Object(C.jsx)("em",{children:"Withdraw"})," when the raffle ends or you will be automatically issued one when the Fair Launch authority withdraws from the treasury."]})})]}),[o.Phase1,o.Phase2].includes(st)&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(T.a,{style:{marginTop:40,marginBottom:20},children:Object(C.jsx)(J,{min:$e,marks:rt,max:et,step:tt,value:we,onChange:function(e,t){return Se(t)},valueLabelDisplay:"auto",style:{width:"calc(100% - 40px)",marginLeft:20,height:30}})})}),Pe.connected?Object(C.jsxs)("div",{children:[[o.Phase1,o.Phase2].includes(st)&&Object(C.jsx)(G,{onClick:at,variant:"contained",disabled:ye&&!(null===Ke||void 0===Ke?void 0:Ke.ticket.data)&&st===o.Phase2,children:ye?Object(C.jsx)(x.a,{}):(null===Ke||void 0===Ke?void 0:Ke.ticket.data)?"Change bid":"Place bid"}),[o.Phase3].includes(st)&&Object(C.jsxs)(C.Fragment,{children:[Z(Ke)&&Object(C.jsx)(G,{onClick:ct,variant:"contained",disabled:void 0!==(null===Ke||void 0===Ke||null===($=Ke.ticket.data)||void 0===$?void 0:$.state.punched),children:ye?Object(C.jsx)(x.a,{}):"Punch Ticket"}),!Z(Ke)&&Object(C.jsx)(G,{onClick:ot,variant:"contained",disabled:ye||void 0===(null===Ke||void 0===Ke?void 0:Ke.ticket.data)||void 0!==(null===Ke||void 0===Ke||null===(ee=Ke.ticket.data)||void 0===ee?void 0:ee.state.withdrawn),children:ye?Object(C.jsx)(x.a,{}):"Withdraw"})]}),st===o.Phase4&&Object(C.jsxs)(C.Fragment,{children:[(!Ke||Z(Ke))&&Object(C.jsx)(H,{children:Object(C.jsx)(G,{disabled:(null===De||void 0===De?void 0:De.state.isSoldOut)||ye||!(null===De||void 0===De?void 0:De.state.isActive)||(null===Ke||void 0===Ke||null===(te=Ke.ticket)||void 0===te||null===(ne=te.data)||void 0===ne?void 0:ne.state.punched)&&0===ge,onClick:Ze,variant:"contained",children:(null===Ke||void 0===Ke||null===(re=Ke.ticket)||void 0===re||null===(ae=re.data)||void 0===ae?void 0:ae.state.punched)&&0===ge?"MINTED":(null===De||void 0===De?void 0:De.state.isSoldOut)?"SOLD OUT":ye?Object(C.jsx)(x.a,{}):"MINT"})}),!Z(Ke)&&Object(C.jsx)(G,{onClick:ot,variant:"contained",disabled:ye||void 0===(null===Ke||void 0===Ke?void 0:Ke.ticket.data)||void 0!==(null===Ke||void 0===Ke||null===(ie=Ke.ticket.data)||void 0===ie?void 0:ie.state.withdrawn),children:ye?Object(C.jsx)(x.a,{}):"Withdraw"})]})]}):Object(C.jsxs)(q,{children:["Connect"," ",[o.Phase1].includes(st)?"to bid":"to see status"]}),Object(C.jsxs)(T.a,{container:!0,justifyContent:"space-between",color:"textSecondary",children:[Object(C.jsx)(y.a,{component:"button",variant:"body2",color:"textSecondary",align:"left",onClick:function(){Ue(!0)},children:"How this raffle works"}),(null===Ke||void 0===Ke?void 0:Ke.ticket.data)&&Object(C.jsx)(y.a,{component:"button",variant:"body2",color:"textSecondary",align:"right",onClick:function(){!Ke||st===o.Lottery||Z(Ke)?He(!0):ot()},children:"Withdraw funds"})]}),Object(C.jsx)(K.a,{open:qe,onClose:function(){return He(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(C.jsx)(N.a,{style:{padding:24},children:"During raffle phases, or if you are a winner, or if this website is not configured to be a fair launch but simply a candy machine, refunds are disallowed."})}),Object(C.jsx)(K.a,{open:Je,onClose:function(){Qe(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(C.jsxs)(N.a,{style:{padding:24},children:[!(null===Ke||void 0===Ke?void 0:Ke.state.data.antiRugSetting)&&Object(C.jsx)("span",{children:"This Fair Launch has no anti-rug settings."}),(null===Ke||void 0===Ke?void 0:Ke.state.data.antiRugSetting)&&Ke.state.data.antiRugSetting.selfDestructDate&&Object(C.jsxs)("div",{children:[Object(C.jsxs)("p",{children:["This Fair Launch will retain \u25ce"," ",(null===Ke||void 0===Ke?void 0:Ke.treasury)*Ke.state.data.antiRugSetting.reserveBp/(1e4*I.LAMPORTS_PER_SOL)," ","(",Ke.state.data.antiRugSetting.reserveBp/100,"%) of the treasury in a locked state until the Fair Launch Authority is able to buy back enough tokens or sell enough NFTs to Fair Launch token holders such that"," ",Ke.state.data.antiRugSetting.tokenRequirement.toNumber()," ","tokens are remaining."]}),Object(C.jsxs)("p",{children:[" ","If the Fair Launch authority is not able to convince enough people through a Candy Machine or other means to return tokens by the refund date of"," ",null===(oe=Object(V.f)(Ke.state.data.antiRugSetting.selfDestructDate))||void 0===oe?void 0:oe.toLocaleString()," ","you will have the option of refunding"," ",Ke.state.data.antiRugSetting.reserveBp/100,"% of the cost of your token against this locked treasury up until the Fair Launch Authority meets their obligations."]}),Object(C.jsx)(G,{onClick:it,variant:"contained",disabled:!Ke.ticket.data||!Ke.ticket.data.state.punched||Date.now()/1e3<Ke.state.data.antiRugSetting.selfDestructDate.toNumber(),children:ye?Object(C.jsx)(x.a,{}):Date.now()/1e3<Ke.state.data.antiRugSetting.selfDestructDate.toNumber()?Object(C.jsxs)("span",{children:["Refund in...",Object(C.jsx)(A.a,{date:Object(V.f)(Ke.state.data.antiRugSetting.selfDestructDate)})]}):"Refund"}),Object(C.jsxs)("div",{style:{textAlign:"center",marginTop:"-5px"},children:[!Ke.ticket.data&&Object(C.jsx)("small",{children:"You currently have no Fair Launch ticket."}),!(null===Ke||void 0===Ke||null===(ce=Ke.ticket)||void 0===ce||null===(se=ce.data)||void 0===se?void 0:se.state.punched)&&Object(C.jsx)("small",{children:"You currently have a ticket but it has not been punched yet, so cannot be refunded."})]})]})]})}),Object(C.jsxs)(K.a,{open:Ye,onClose:function(){return Ue(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:[Object(C.jsxs)(_.a,{disableTypography:!0,style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(C.jsx)(y.a,{component:"button",variant:"h6",color:"textSecondary",onClick:function(){Ue(!0)},children:"How it works"}),Object(C.jsx)(O.a,{"aria-label":"close",className:X.closeButton,onClick:function(){return Ue(!1)},children:Object(C.jsx)(D.a,{})})]}),Object(C.jsxs)(N.a,{children:[Object(C.jsx)(P.a,{variant:"h6",children:"Phase 1 - Set the fair price:"}),Object(C.jsxs)(P.a,{gutterBottom:!0,color:"textSecondary",children:['Enter a bid in the range provided by the artist. The median of all bids will be the "fair" price of the raffle ticket.'," ",(null===Ke||void 0===Ke||null===(ue=Ke.state)||void 0===ue||null===(le=ue.data)||void 0===le?void 0:le.fee)&&Object(C.jsx)("span",{children:Object(C.jsxs)("b",{children:["All bids will incur a \u25ce"," ",(null===Ke||void 0===Ke||null===(de=Ke.state)||void 0===de||null===(be=de.data)||void 0===be?void 0:be.fee.toNumber())/I.LAMPORTS_PER_SOL," ","fee."]})})]}),Object(C.jsx)(P.a,{variant:"h6",children:"Phase 2 - Grace period:"}),Object(C.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"If your bid was at or above the fair price, you automatically get a raffle ticket at that price. There's nothing else you need to do. Your excess SOL will be returned to you when the Fair Launch authority withdraws from the treasury. If your bid is below the median price, you can still opt in at the fair price during this phase."}),ut?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(P.a,{variant:"h6",children:"Phase 3 - The Candy Machine:"}),Object(C.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"Everyone who got a raffle ticket at the fair price is entered to win an NFT. If you win an NFT, congrats. If you don\u2019t, no worries, your SOL will go right back into your wallet."})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(P.a,{variant:"h6",children:"Phase 3 - The Lottery:"}),Object(C.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"Everyone who got a raffle ticket at the fair price is entered to win a Fair Launch Token that entitles them to an NFT at a later date using a Candy Machine here. If you don\u2019t win, no worries, your SOL will go right back into your wallet."}),Object(C.jsx)(P.a,{variant:"h6",children:"Phase 4 - The Candy Machine:"}),Object(C.jsxs)(P.a,{gutterBottom:!0,color:"textSecondary",children:["On"," ",(null===De||void 0===De?void 0:De.state.goLiveDate)?null===(he=Object(V.f)(null===De||void 0===De?void 0:De.state.goLiveDate))||void 0===he?void 0:he.toLocaleString():" some later date",", you will be able to exchange your Fair Launch token for an NFT using the Candy Machine at this site by pressing the Mint Button."]})]})]})]})]})})}),Ke&&Object(C.jsx)(j.a,{maxWidth:"xs",style:{position:"relative",marginTop:10},children:Object(C.jsx)("div",{style:{margin:20},children:Object(C.jsxs)(T.a,{container:!0,direction:"row",wrap:"nowrap",children:[Object(C.jsxs)(T.a,{container:!0,md:4,direction:"column",children:[Object(C.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"Bids"}),Object(C.jsx)(P.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:(null===Ke||void 0===Ke?void 0:Ke.state.numberTicketsSold.toNumber())||0})]}),Object(C.jsxs)(T.a,{container:!0,md:4,direction:"column",children:[Object(C.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"Median bid"}),Object(C.jsxs)(P.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce ",V.c.format(nt)]})]}),Object(C.jsxs)(T.a,{container:!0,md:4,direction:"column",children:[Object(C.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"Total raised"}),Object(C.jsxs)(P.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce"," ",V.c.format(((null===Ke||void 0===Ke?void 0:Ke.treasury)||0)/I.LAMPORTS_PER_SOL)]})]})]})})}),Object(C.jsx)(k.a,{open:Re.open,autoHideDuration:6e3,onClose:function(){return Ce(Object(d.a)(Object(d.a)({},Re),{},{open:!1}))},children:Object(C.jsx)(W.a,{onClose:function(){return Ce(Object(d.a)(Object(d.a)({},Re),{},{open:!1}))},severity:Re.severity,children:Re.message})})]})},ee=n(33),te=n(232),ne=n(120),re=n(777),ae=n(486),ie=s.a.createContext(null),oe=function(e){var t=e.children,n=void 0===t?null:t,r=Object(c.useRef)(),a=Object(c.useRef)(),i=Object(c.useMemo)((function(){return function(){var e;a.current&&r.current&&(r.current.style.visibility="visible",null===(e=a.current({particleCount:400,spread:160,origin:{y:.3}}))||void 0===e||e.finally((function(){r.current&&(r.current.style.visibility="hidden")})))}}),[]);Object(c.useEffect)((function(){r.current&&!a.current&&(r.current.style.visibility="hidden",a.current=ae.a.create(r.current,{resize:!0,useWorker:!0}))}),[]);return Object(C.jsxs)(ie.Provider,{value:{dropConfetti:i},children:[Object(C.jsx)("canvas",{ref:r,style:{width:"100vw",height:"100vh",position:"absolute",zIndex:1,top:0,left:0}}),n]})},ce=Object(ne.b)({palette:{type:"dark"}}),se=new ee.e.PublicKey("7fP1DM1UK3xBgzXxQVwA3fFA4PPENaQ6YghJvFLeXFMz"),ue=new ee.e.Connection("https://api.mainnet-beta.solana.com"),le=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CANDY_MACHINE_ID:"",REACT_APP_SOLANA_NETWORK:"mainnet-beta",REACT_APP_SOLANA_RPC_HOST:"https://api.mainnet-beta.solana.com",REACT_APP_FAIR_LAUNCH_ID:"7fP1DM1UK3xBgzXxQVwA3fFA4PPENaQ6YghJvFLeXFMz"}).REACT_APP_CANDY_START_DATE,10),de=function(){var e=Object(c.useMemo)((function(){return Object(I.clusterApiUrl)("mainnet-beta")}),[]),t=Object(c.useMemo)((function(){return[Object(te.getPhantomWallet)(),Object(te.getSolflareWallet)(),Object(te.getSolletWallet)()]}),[]);return Object(C.jsx)(re.a,{theme:ce,children:Object(C.jsx)(F.ConnectionProvider,{endpoint:e,children:Object(C.jsx)(F.WalletProvider,{wallets:t,autoConnect:!0,children:Object(C.jsx)(Y.WalletDialogProvider,{children:Object(C.jsx)(oe,{children:Object(C.jsx)($,{candyMachineId:undefined,fairLaunchId:se,connection:ue,startDate:le,txTimeout:3e4})})})})})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,793)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};l.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(de,{})}),document.getElementById("root")),be()}},[[759,1,2]]]);
//# sourceMappingURL=main.d3eee250.chunk.js.map